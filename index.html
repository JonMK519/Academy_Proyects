<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Case Analyzer Pro - Professional Financial Analysis Tool</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- Header with Language Toggle -->
    <header>
        <div class="header-container">
            <div class="header-brand">
                <h1 id="header-title">Business Case Analyzer Pro</h1>
                <p id="header-subtitle">Professional Financial Analysis & ROI Calculator</p>
            </div>
            <div class="language-toggle">
                <button class="active" onclick="switchLanguage('en')" id="lang-en">English</button>
                <button onclick="switchLanguage('es')" id="lang-es">Español</button>
            </div>
        </div>
    </header>

    <main>
        <!-- Dashboard with Key Metrics -->
        <section>
            <h2 id="section-dashboard">Financial Dashboard</h2>
            <div class="dashboard" id="dashboard">
                <div class="metric-card success">
                    <div class="metric-label" id="metric-label-roi">ROI (Return on Investment)</div>
                    <div class="metric-value" id="roi-value">0%</div>
                    <div class="metric-change" id="roi-status">Enter data to calculate</div>
                </div>
                <div class="metric-card info">
                    <div class="metric-label" id="metric-label-npv">NPV (Net Present Value)</div>
                    <div class="metric-value" id="npv-value">$0</div>
                    <div class="metric-change" id="npv-status">Discounted cash flow</div>
                </div>
                <div class="metric-card warning">
                    <div class="metric-label" id="metric-label-payback">Payback Period</div>
                    <div class="metric-value" id="payback-value">0</div>
                    <div class="metric-change" id="payback-status">months to recover investment</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label" id="metric-label-irr">IRR (Internal Rate of Return)</div>
                    <div class="metric-value" id="irr-value">0%</div>
                    <div class="metric-change" id="irr-status">Annualized return rate</div>
                </div>
            </div>
        </section>

        <!-- Project Data Entry Form -->
        <section>
            <h2 id="section-project-info">Project Information</h2>
            <form id="projectForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="projectName">Nombre del Proyecto *</label>
                        <input type="text" id="projectName" placeholder="ej., Transformación Digital" required>
                    </div>
                    <div class="form-group">
                        <label for="initialInvestment">Inversión Inicial ($) *</label>
                        <input type="number" id="initialInvestment" placeholder="100000" min="0" step="1000" required>
                    </div>
                    <div class="form-group">
                        <label for="discountRate">Tasa de Descuento (%) *</label>
                        <input type="number" id="discountRate" placeholder="10" min="0" max="100" step="0.1" value="10" required>
                    </div>
                    <div class="form-group">
                        <label for="projectDuration">Duración del Proyecto (meses) *</label>
                        <input type="number" id="projectDuration" placeholder="24" min="1" max="120" value="24" required>
                    </div>
                </div>

                <h3 id="subsection-revenue">Revenue Projections</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="yearlyRevenue">Incremento de Ingresos Anuales ($) *</label>
                        <input type="number" id="yearlyRevenue" placeholder="50000" min="0" step="1000" required>
                    </div>
                    <div class="form-group">
                        <label for="revenueGrowth">Tasa de Crecimiento de Ingresos (% anual)</label>
                        <input type="number" id="revenueGrowth" placeholder="5" min="0" max="100" step="0.1" value="0">
                    </div>
                </div>

                <h3 id="subsection-costs">Cost Projections</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="operatingCosts">Costos Operativos Anuales ($)</label>
                        <input type="number" id="operatingCosts" placeholder="20000" min="0" step="1000" value="0">
                    </div>
                    <div class="form-group">
                        <label for="maintenanceCosts">Costos de Mantenimiento Anuales ($)</label>
                        <input type="number" id="maintenanceCosts" placeholder="5000" min="0" step="1000" value="0">
                    </div>
                </div>

                <h3 id="subsection-scenarios">Scenario Analysis</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="bestCaseMultiplier">Multiplicador Mejor Caso</label>
                        <input type="number" id="bestCaseMultiplier" placeholder="1.3" min="1" max="3" step="0.1" value="1.3">
                    </div>
                    <div class="form-group">
                        <label for="worstCaseMultiplier">Multiplicador Peor Caso</label>
                        <input type="number" id="worstCaseMultiplier" placeholder="0.7" min="0.1" max="1" step="0.1" value="0.7">
                    </div>
                </div>

                <div class="button-group">
                    <button type="submit" class="btn-primary" id="btn-calculate">
                        Calculate Analysis
                    </button>
                    <button type="button" class="btn-secondary" onclick="resetForm()" id="btn-reset">
                        Reset Form
                    </button>
                </div>
            </form>
            <div id="formMessage" class="hidden"></div>
        </section>

        <!-- Charts Section with Tabs -->
        <section>
            <h2 id="section-visual-analysis">Visual Analysis</h2>
            <div class="tabs">
                <button class="tab active" onclick="switchTab('cashflow')">Flujo de Caja en el Tiempo</button>
                <button class="tab" onclick="switchTab('roi')">Comparación de ROI</button>
                <button class="tab" onclick="switchTab('scenarios')">Análisis de Escenarios</button>
            </div>

            <div id="cashflow-tab" class="tab-content active">
                <div class="chart-container">
                    <canvas id="cashflowChart"></canvas>
                </div>
            </div>

            <div id="roi-tab" class="tab-content">
                <div class="chart-container">
                    <canvas id="roiChart"></canvas>
                </div>
            </div>

            <div id="scenarios-tab" class="tab-content">
                <div class="chart-container">
                    <canvas id="scenariosChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Scenario Comparison Cards -->
        <section>
            <h2 id="section-scenarios">Scenario Comparison</h2>
            <div class="scenario-grid" id="scenarioGrid">
                <div class="scenario-card expected">
                    <div class="scenario-title" id="title-expected">📊 Expected Case</div>
                    <div class="scenario-metrics">
                        <div class="scenario-metric">
                            <span id="label-expected-roi">ROI:</span>
                            <strong id="expected-roi">0%</strong>
                        </div>
                        <div class="scenario-metric">
                            <span id="label-expected-npv">NPV:</span>
                            <strong id="expected-npv">$0</strong>
                        </div>
                        <div class="scenario-metric">
                            <span id="label-expected-payback">Payback:</span>
                            <strong id="expected-payback">0 months</strong>
                        </div>
                    </div>
                </div>

                <div class="scenario-card best">
                    <div class="scenario-title" id="title-best">🚀 Best Case</div>
                    <div class="scenario-metrics">
                        <div class="scenario-metric">
                            <span id="label-best-roi">ROI:</span>
                            <strong id="best-roi">0%</strong>
                        </div>
                        <div class="scenario-metric">
                            <span id="label-best-npv">NPV:</span>
                            <strong id="best-npv">$0</strong>
                        </div>
                        <div class="scenario-metric">
                            <span id="label-best-payback">Payback:</span>
                            <strong id="best-payback">0 months</strong>
                        </div>
                    </div>
                </div>

                <div class="scenario-card worst">
                    <div class="scenario-title" id="title-worst">⚠️ Worst Case</div>
                    <div class="scenario-metrics">
                        <div class="scenario-metric">
                            <span id="label-worst-roi">ROI:</span>
                            <strong id="worst-roi">0%</strong>
                        </div>
                        <div class="scenario-metric">
                            <span id="label-worst-npv">NPV:</span>
                            <strong id="worst-npv">$0</strong>
                        </div>
                        <div class="scenario-metric">
                            <span id="label-worst-payback">Payback:</span>
                            <strong id="worst-payback">0 months</strong>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Smart Recommendations -->
        <section>
            <h2 id="section-recommendations">Smart Recommendations</h2>
            <div class="recommendations" id="recommendations">
                <p style="color: #718096;">Complete el formulario y calcule para recibir recomendaciones inteligentes basadas en su análisis de caso de negocio.</p>
            </div>
        </section>

        <!-- Export Options -->
        <section class="text-center">
            <h2 id="section-export">Export Report</h2>
            <p id="export-description" style="color: var(--text-muted); margin-bottom: 20px;">Generate a comprehensive PDF report with all metrics, charts and recommendations.</p>
            <button class="btn-export" onclick="exportToPDF()" id="btn-export">
                Export Full Report to PDF
            </button>
        </section>
    </main>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>